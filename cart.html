<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panier — ELLE Maroquinerie</title>
  <style>
    body {
      font-family: "Georgia", serif;
      background-color: #f6f1eb;
      margin: 0;
      color: #3e2f1c;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 40px;
      background: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    header h1 { font-size: 1.2rem; margin:0; }
    nav a { color: #3e2f1c; text-decoration: none; margin: 0 8px; }
    nav a:hover { text-decoration: underline; }

    main { padding: 40px; max-width: 900px; margin: auto; }
    h2 { font-weight: bold; margin-bottom: 20px; }
    .cart-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    .cart-table th, .cart-table td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
    .cart-table img { width: 80px; height: 80px; object-fit: cover; border-radius: 6px; border:1px solid #ddd; background:#fff; }
    .qty-controls { display: flex; gap:6px; align-items:center; }
    .qty-controls button { background:#8b5e34; color:white; border:none; padding:4px 8px; cursor:pointer; border-radius:4px; }
    .qty-controls button:hover { background:#a66d40; }

    .total { text-align: right; font-size: 1.2rem; font-weight: bold; margin-top: 10px; }
    .actions { display:flex; justify-content: flex-end; gap:10px; margin-top: 20px; }
    .actions button { background-color: #8b5e34; color: white; border:none; padding:10px 16px; border-radius:6px; cursor:pointer; }
    .actions button:hover { background:#a66d40; }
    .actions .clear { background:#b23b3b; }
    .actions .clear:hover { background:#d14a4a; }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9rem;
      color: #7d6c5f;
      margin-top: 40px;
    }

    @media(max-width:600px){
      .cart-table img { width:60px; height:60px; }
      .actions { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body>
  <header>
    <h1>ELLE MAROQUINERIE</h1>
    <nav>
      <a href="index.html">Accueil</a> |
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <main>
    <h2>Votre Panier</h2>
    <table class="cart-table" id="cartTable">
      <thead>
        <tr>
          <th>Produit</th>
          <th>Prix</th>
          <th>Quantité</th>
          <th>Total</th>
          <th>Supprimer</th>
        </tr>
      </thead>
      <tbody id="cartBody">
        <!-- Les produits du panier seront injectés ici -->
      </tbody>
    </table>
    <div class="total">Total : <span id="cartTotal">0,00 €</span></div>

    <div class="actions">
      <button id="clearCartBtn" class="clear">Vider le panier</button>
      <button id="checkoutBtn">Simuler le paiement</button>
    </div>
  </main>

  <footer>
    © 2025 ELLE Maroquinerie — Démo. Paiement non connecté.
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded',()=>{
      const STORAGE_KEY = 'elle_cart_v1';
      let cart = JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');

      const cartBody = document.getElementById('cartBody');
      const cartTotalEl = document.getElementById('cartTotal');
      const clearCartBtn = document.getElementById('clearCartBtn');
      const checkoutBtn = document.getElementById('checkoutBtn');

      function updateCart(){
        cartBody.innerHTML='';
        let total=0;
        cart.forEach((item,index)=>{
          const row=document.createElement('tr');
          let priceNum=parseFloat(item.price.replace('€','').replace(',','.'))||0;
          let rowTotal=(priceNum*item.qty).toFixed(2).replace('.',',');
          total+=priceNum*item.qty;
          row.innerHTML=`
            <td><img src="${item.img}" alt="${item.title}"> ${item.title}</td>
            <td>${item.price}</td>
            <td class="qty-controls">
              <button data-action="minus" data-index="${index}">-</button>
              <span>${item.qty}</span>
              <button data-action="plus" data-index="${index}">+</button>
            </td>
            <td>${rowTotal} €</td>
            <td><button data-action="remove" data-index="${index}">✕</button></td>
          `;
          cartBody.appendChild(row);
        });
        cartTotalEl.textContent=total.toFixed(2).replace('.',',')+' €';
        localStorage.setItem(STORAGE_KEY,JSON.stringify(cart));
      }

      cartBody.addEventListener('click',e=>{
        const btn=e.target;
        if(btn.dataset.action){
          const idx=parseInt(btn.dataset.index);
          if(btn.dataset.action==='plus'){ cart[idx].qty++; }
          if(btn.dataset.action==='minus'){ cart[idx].qty--; if(cart[idx].qty<=0) cart.splice(idx,1); }
          if(btn.dataset.action==='remove'){ cart.splice(idx,1); }
          updateCart();
        }
      });

      clearCartBtn.addEventListener('click',()=>{
        cart=[];
        updateCart();
      });

      checkoutBtn.addEventListener('click',()=>{
        if(cart.length===0){
          alert("Votre panier est vide !");
        } else {
          alert("Simulation de paiement terminée.\nMerci pour votre commande !");
          cart=[];
          updateCart();
        }
      });

      updateCart();
    });
  </script>
</body>
</html>
